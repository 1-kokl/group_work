{"ast":null,"code":"import authAPI from '../../services/api/authAPI';\nconst storage = typeof window !== 'undefined' ? window.sessionStorage : null;\nconst TOKEN_STORAGE_KEY = 'auth.token';\nconst REFRESH_STORAGE_KEY = 'auth.refreshToken';\nconst EXPIRES_STORAGE_KEY = 'auth.expiresAt';\nconst USER_STORAGE_KEY = 'auth.user';\nconst REMEMBER_STORAGE_KEY = 'auth.remember';\nfunction readJson(key) {\n  try {\n    if (!storage) return null;\n    const raw = storage.getItem(key);\n    return raw ? JSON.parse(raw) : null;\n  } catch (error) {\n    console.warn(`[auth] 读取 ${key} 失败:`, error);\n    return null;\n  }\n}\nfunction writeJson(key, value) {\n  try {\n    if (!storage) return;\n    if (value === null || value === undefined) {\n      storage.removeItem(key);\n    } else {\n      storage.setItem(key, JSON.stringify(value));\n    }\n  } catch (error) {\n    console.warn(`[auth] 写入 ${key} 失败:`, error);\n  }\n}\nfunction writeTokens(state) {\n  try {\n    if (!storage) return;\n    if (state.token) {\n      storage.setItem(TOKEN_STORAGE_KEY, state.token);\n    } else {\n      storage.removeItem(TOKEN_STORAGE_KEY);\n    }\n    if (state.refreshToken) {\n      storage.setItem(REFRESH_STORAGE_KEY, state.refreshToken);\n    } else {\n      storage.removeItem(REFRESH_STORAGE_KEY);\n    }\n    if (state.expiresAt) {\n      storage.setItem(EXPIRES_STORAGE_KEY, String(state.expiresAt));\n    } else {\n      storage.removeItem(EXPIRES_STORAGE_KEY);\n    }\n  } catch (error) {\n    console.warn('[auth] 存储令牌信息失败:', error);\n  }\n}\nfunction clearStorage() {\n  if (!storage) return;\n  storage.removeItem(TOKEN_STORAGE_KEY);\n  storage.removeItem(REFRESH_STORAGE_KEY);\n  storage.removeItem(EXPIRES_STORAGE_KEY);\n  storage.removeItem(USER_STORAGE_KEY);\n}\nconst state = () => ({\n  token: storage?.getItem(TOKEN_STORAGE_KEY) || '',\n  refreshToken: storage?.getItem(REFRESH_STORAGE_KEY) || '',\n  expiresAt: Number(storage?.getItem(EXPIRES_STORAGE_KEY)) || 0,\n  user: readJson(USER_STORAGE_KEY),\n  status: 'idle',\n  loading: false,\n  error: null\n});\nconst getters = {\n  isAuthenticated: state => Boolean(state.token),\n  authToken: state => state.token,\n  refreshToken: state => state.refreshToken,\n  currentUser: state => state.user,\n  authStatus: state => state.status,\n  authLoading: state => state.loading,\n  authError: state => state.error,\n  isTokenExpired: state => state.expiresAt ? Date.now() > Number(state.expiresAt) : true\n};\nconst mutations = {\n  SET_TOKENS(state, {\n    token,\n    refreshToken,\n    expiresAt\n  }) {\n    state.token = token || '';\n    state.refreshToken = refreshToken || '';\n    state.expiresAt = expiresAt || 0;\n    writeTokens(state);\n  },\n  SET_USER(state, user) {\n    state.user = user || null;\n    writeJson(USER_STORAGE_KEY, state.user);\n  },\n  SET_STATUS(state, status) {\n    state.status = status || 'idle';\n  },\n  SET_LOADING(state, value) {\n    state.loading = value;\n  },\n  SET_ERROR(state, error) {\n    state.error = error || null;\n  },\n  RESET_AUTH(state) {\n    state.token = '';\n    state.refreshToken = '';\n    state.expiresAt = 0;\n    state.user = null;\n    state.status = 'idle';\n    state.loading = false;\n    state.error = null;\n    clearStorage();\n  }\n};\nconst actions = {\n  async initialize({\n    dispatch,\n    getters\n  }) {\n    if (getters.isAuthenticated && getters.isTokenExpired) {\n      try {\n        await dispatch('refreshToken');\n      } catch (error) {\n        await dispatch('forceLogout');\n        throw error;\n      }\n    }\n  },\n  async login({\n    commit,\n    dispatch\n  }, {\n    remember = false,\n    ...credentials\n  }) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    commit('SET_STATUS', 'authenticating');\n    try {\n      const {\n        token,\n        refreshToken,\n        expiresAt,\n        user\n      } = await authAPI.login(credentials);\n      commit('SET_TOKENS', {\n        token,\n        refreshToken,\n        expiresAt\n      });\n      commit('SET_USER', user);\n      commit('SET_STATUS', 'authenticated');\n      if (user) {\n        await dispatch('user/setProfile', user, {\n          root: true\n        });\n      }\n      const identifier = (credentials.identifier || credentials.username || '').trim();\n      if ((!user || !user.username) && identifier) {\n        await dispatch('user/loadProfileFromCache', identifier, {\n          root: true\n        });\n      }\n      if (remember) {\n        writeJson(REMEMBER_STORAGE_KEY, {\n          identifier: credentials.identifier\n        });\n      } else {\n        localStorage.removeItem(REMEMBER_STORAGE_KEY);\n      }\n      return user;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async register({\n    commit,\n    dispatch\n  }, payload) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    commit('SET_STATUS', 'authenticating');\n    try {\n      const {\n        token,\n        refreshToken,\n        expiresAt,\n        user\n      } = await authAPI.register(payload);\n      commit('SET_TOKENS', {\n        token,\n        refreshToken,\n        expiresAt\n      });\n      commit('SET_USER', user);\n      commit('SET_STATUS', 'authenticated');\n      if (user) {\n        dispatch('user/setProfile', user, {\n          root: true\n        });\n      }\n      return user;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async refreshToken({\n    commit,\n    getters\n  }) {\n    const refreshToken = getters.refreshToken || storage?.getItem(REFRESH_STORAGE_KEY);\n    if (!refreshToken) {\n      throw new Error('缺少刷新令牌');\n    }\n    try {\n      const {\n        token,\n        refreshToken: newRefreshToken,\n        expiresAt\n      } = await authAPI.refreshToken(refreshToken);\n      commit('SET_TOKENS', {\n        token,\n        refreshToken: newRefreshToken,\n        expiresAt\n      });\n      commit('SET_STATUS', 'authenticated');\n      return token;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    }\n  },\n  async logout({\n    commit,\n    dispatch\n  }) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    try {\n      await authAPI.logout();\n    } catch (error) {\n      console.warn('[auth] 退出登录接口调用失败:', error);\n    } finally {\n      commit('RESET_AUTH');\n      dispatch('user/clearProfile', null, {\n        root: true\n      });\n      commit('SET_LOADING', false);\n    }\n  },\n  async forceLogout({\n    commit,\n    dispatch\n  }) {\n    commit('RESET_AUTH');\n    dispatch('user/clearProfile', null, {\n      root: true\n    });\n  },\n  updateUser({\n    commit\n  }, user) {\n    commit('SET_USER', user);\n  },\n  syncTokens({\n    commit\n  }, payload) {\n    if (!payload) {\n      commit('RESET_AUTH');\n      return;\n    }\n    commit('SET_TOKENS', payload);\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["authAPI","storage","window","sessionStorage","TOKEN_STORAGE_KEY","REFRESH_STORAGE_KEY","EXPIRES_STORAGE_KEY","USER_STORAGE_KEY","REMEMBER_STORAGE_KEY","readJson","key","raw","getItem","JSON","parse","error","console","warn","writeJson","value","undefined","removeItem","setItem","stringify","writeTokens","state","token","refreshToken","expiresAt","String","clearStorage","Number","user","status","loading","getters","isAuthenticated","Boolean","authToken","currentUser","authStatus","authLoading","authError","isTokenExpired","Date","now","mutations","SET_TOKENS","SET_USER","SET_STATUS","SET_LOADING","SET_ERROR","RESET_AUTH","actions","initialize","dispatch","login","commit","remember","credentials","root","identifier","username","trim","localStorage","register","payload","Error","newRefreshToken","logout","forceLogout","updateUser","syncTokens","namespaced"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/store/modules/auth.js"],"sourcesContent":["import authAPI from '../../services/api/authAPI';\n\nconst storage = typeof window !== 'undefined' ? window.sessionStorage : null;\nconst TOKEN_STORAGE_KEY = 'auth.token';\nconst REFRESH_STORAGE_KEY = 'auth.refreshToken';\nconst EXPIRES_STORAGE_KEY = 'auth.expiresAt';\nconst USER_STORAGE_KEY = 'auth.user';\nconst REMEMBER_STORAGE_KEY = 'auth.remember';\n\nfunction readJson(key) {\n  try {\n    if (!storage) return null;\n    const raw = storage.getItem(key);\n    return raw ? JSON.parse(raw) : null;\n  } catch (error) {\n    console.warn(`[auth] 读取 ${key} 失败:`, error);\n    return null;\n  }\n}\n\nfunction writeJson(key, value) {\n  try {\n    if (!storage) return;\n    if (value === null || value === undefined) {\n      storage.removeItem(key);\n    } else {\n      storage.setItem(key, JSON.stringify(value));\n    }\n  } catch (error) {\n    console.warn(`[auth] 写入 ${key} 失败:`, error);\n  }\n}\n\nfunction writeTokens(state) {\n  try {\n    if (!storage) return;\n    if (state.token) {\n      storage.setItem(TOKEN_STORAGE_KEY, state.token);\n    } else {\n      storage.removeItem(TOKEN_STORAGE_KEY);\n    }\n\n    if (state.refreshToken) {\n      storage.setItem(REFRESH_STORAGE_KEY, state.refreshToken);\n    } else {\n      storage.removeItem(REFRESH_STORAGE_KEY);\n    }\n\n    if (state.expiresAt) {\n      storage.setItem(EXPIRES_STORAGE_KEY, String(state.expiresAt));\n    } else {\n      storage.removeItem(EXPIRES_STORAGE_KEY);\n    }\n  } catch (error) {\n    console.warn('[auth] 存储令牌信息失败:', error);\n  }\n}\n\nfunction clearStorage() {\n  if (!storage) return;\n  storage.removeItem(TOKEN_STORAGE_KEY);\n  storage.removeItem(REFRESH_STORAGE_KEY);\n  storage.removeItem(EXPIRES_STORAGE_KEY);\n  storage.removeItem(USER_STORAGE_KEY);\n}\n\nconst state = () => ({\n  token: storage?.getItem(TOKEN_STORAGE_KEY) || '',\n  refreshToken: storage?.getItem(REFRESH_STORAGE_KEY) || '',\n  expiresAt: Number(storage?.getItem(EXPIRES_STORAGE_KEY)) || 0,\n  user: readJson(USER_STORAGE_KEY),\n  status: 'idle',\n  loading: false,\n  error: null\n});\n\nconst getters = {\n  isAuthenticated: (state) => Boolean(state.token),\n  authToken: (state) => state.token,\n  refreshToken: (state) => state.refreshToken,\n  currentUser: (state) => state.user,\n  authStatus: (state) => state.status,\n  authLoading: (state) => state.loading,\n  authError: (state) => state.error,\n  isTokenExpired: (state) =>\n    state.expiresAt ? Date.now() > Number(state.expiresAt) : true\n};\n\nconst mutations = {\n  SET_TOKENS(state, { token, refreshToken, expiresAt }) {\n    state.token = token || '';\n    state.refreshToken = refreshToken || '';\n    state.expiresAt = expiresAt || 0;\n    writeTokens(state);\n  },\n  SET_USER(state, user) {\n    state.user = user || null;\n    writeJson(USER_STORAGE_KEY, state.user);\n  },\n  SET_STATUS(state, status) {\n    state.status = status || 'idle';\n  },\n  SET_LOADING(state, value) {\n    state.loading = value;\n  },\n  SET_ERROR(state, error) {\n    state.error = error || null;\n  },\n  RESET_AUTH(state) {\n    state.token = '';\n    state.refreshToken = '';\n    state.expiresAt = 0;\n    state.user = null;\n    state.status = 'idle';\n    state.loading = false;\n    state.error = null;\n    clearStorage();\n  }\n};\n\nconst actions = {\n  async initialize({ dispatch, getters }) {\n    if (getters.isAuthenticated && getters.isTokenExpired) {\n      try {\n        await dispatch('refreshToken');\n      } catch (error) {\n        await dispatch('forceLogout');\n        throw error;\n      }\n    }\n  },\n\n  async login({ commit, dispatch }, { remember = false, ...credentials }) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    commit('SET_STATUS', 'authenticating');\n\n    try {\n      const { token, refreshToken, expiresAt, user } = await authAPI.login(\n        credentials\n      );\n      commit('SET_TOKENS', { token, refreshToken, expiresAt });\n      commit('SET_USER', user);\n      commit('SET_STATUS', 'authenticated');\n      if (user) {\n        await dispatch('user/setProfile', user, { root: true });\n      }\n\n      const identifier = (credentials.identifier || credentials.username || '').trim();\n      if ((!user || !user.username) && identifier) {\n        await dispatch('user/loadProfileFromCache', identifier, { root: true });\n      }\n\n      if (remember) {\n        writeJson(REMEMBER_STORAGE_KEY, {\n          identifier: credentials.identifier\n        });\n      } else {\n        localStorage.removeItem(REMEMBER_STORAGE_KEY);\n      }\n\n      return user;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n\n  async register({ commit, dispatch }, payload) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    commit('SET_STATUS', 'authenticating');\n\n    try {\n      const { token, refreshToken, expiresAt, user } = await authAPI.register(\n        payload\n      );\n      commit('SET_TOKENS', { token, refreshToken, expiresAt });\n      commit('SET_USER', user);\n      commit('SET_STATUS', 'authenticated');\n      if (user) {\n        dispatch('user/setProfile', user, { root: true });\n      }\n      return user;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n\n  async refreshToken({ commit, getters }) {\n    const refreshToken = getters.refreshToken || storage?.getItem(REFRESH_STORAGE_KEY);\n    if (!refreshToken) {\n      throw new Error('缺少刷新令牌');\n    }\n    try {\n      const { token, refreshToken: newRefreshToken, expiresAt } =\n        await authAPI.refreshToken(refreshToken);\n      commit('SET_TOKENS', {\n        token,\n        refreshToken: newRefreshToken,\n        expiresAt\n      });\n      commit('SET_STATUS', 'authenticated');\n      return token;\n    } catch (error) {\n      commit('SET_STATUS', 'error');\n      commit('SET_ERROR', error);\n      throw error;\n    }\n  },\n\n  async logout({ commit, dispatch }) {\n    commit('SET_LOADING', true);\n    commit('SET_ERROR', null);\n    try {\n      await authAPI.logout();\n    } catch (error) {\n      console.warn('[auth] 退出登录接口调用失败:', error);\n    } finally {\n      commit('RESET_AUTH');\n      dispatch('user/clearProfile', null, { root: true });\n      commit('SET_LOADING', false);\n    }\n  },\n\n  async forceLogout({ commit, dispatch }) {\n    commit('RESET_AUTH');\n    dispatch('user/clearProfile', null, { root: true });\n  },\n\n  updateUser({ commit }, user) {\n    commit('SET_USER', user);\n  },\n\n  syncTokens({ commit }, payload) {\n    if (!payload) {\n      commit('RESET_AUTH');\n      return;\n    }\n    commit('SET_TOKENS', payload);\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}