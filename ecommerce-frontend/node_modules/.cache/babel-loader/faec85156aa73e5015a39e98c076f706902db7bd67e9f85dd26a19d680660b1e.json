{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { computed, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Grid, Histogram, User, Menu as MenuIcon } from '@element-plus/icons-vue';\nimport { sanitizeInput } from '../../utils/security';\nexport default {\n  __name: 'AppSidebar',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const hover = ref(false);\n    const isExpanded = computed(() => hover.value);\n    function setHover(value) {\n      hover.value = value;\n    }\n    const navMenus = [{\n      name: 'Dashboard',\n      label: '仪表盘总览',\n      icon: Histogram,\n      roles: ['admin', 'operator', 'merchant']\n    }, {\n      name: 'Profile',\n      label: '个人中心',\n      icon: User\n    }, {\n      name: 'Navigation',\n      label: '系统导航',\n      icon: MenuIcon\n    }];\n    const profileState = computed(() => store.getters['user/userProfile'] || {});\n    const userState = computed(() => store.getters['auth/currentUser'] || {});\n    const userRoles = computed(() => userState.value.roles || []);\n    const userName = computed(() => sanitizeInput(profileState.value.username || userState.value.username || '未设置'));\n    const userRole = computed(() => userRoles.value[0] || '普通用户');\n    const userInitials = computed(() => userName.value ? userName.value.slice(0, 1).toUpperCase() : 'U');\n    const visibleMenus = computed(() => navMenus.filter(item => {\n      if (!item.roles?.length) return true;\n      return item.roles.some(role => userRoles.value.includes(role));\n    }));\n    const activeRoute = computed(() => route.name);\n    function navigate(item) {\n      router.push({\n        name: item.name\n      }).catch(() => {});\n    }\n    function goProfile() {\n      router.push({\n        name: 'Profile'\n      }).catch(() => {});\n    }\n    async function logout() {\n      await store.dispatch('auth/logout');\n      await store.dispatch('user/clearProfile');\n      router.replace({\n        name: 'Login'\n      });\n    }\n    const __returned__ = {\n      router,\n      route,\n      store,\n      hover,\n      isExpanded,\n      setHover,\n      navMenus,\n      profileState,\n      userState,\n      userRoles,\n      userName,\n      userRole,\n      userInitials,\n      visibleMenus,\n      activeRoute,\n      navigate,\n      goProfile,\n      logout,\n      computed,\n      ref,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get Grid() {\n        return Grid;\n      },\n      get Histogram() {\n        return Histogram;\n      },\n      get User() {\n        return User;\n      },\n      get MenuIcon() {\n        return MenuIcon;\n      },\n      get sanitizeInput() {\n        return sanitizeInput;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","useRoute","useRouter","useStore","Grid","Histogram","User","Menu","MenuIcon","sanitizeInput","router","route","store","hover","isExpanded","value","setHover","navMenus","name","label","icon","roles","profileState","getters","userState","userRoles","userName","username","userRole","userInitials","slice","toUpperCase","visibleMenus","filter","item","length","some","role","includes","activeRoute","navigate","push","catch","goProfile","logout","dispatch","replace"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/components/layout/AppSidebar.vue"],"sourcesContent":["<template>\n  <aside\n    :class=\"['app-sidebar', { 'is-expanded': isExpanded }]\"\n    @mouseenter=\"setHover(true)\"\n    @mouseleave=\"setHover(false)\"\n  >\n    <div class=\"sidebar-content\">\n      <div class=\"sidebar-brand\">\n        <el-icon><Grid /></el-icon>\n        <span v-if=\"isExpanded\">管理菜单</span>\n      </div>\n\n      <div class=\"sidebar-user\" v-if=\"isExpanded\">\n        <div class=\"user-avatar\">{{ userInitials }}</div>\n        <div class=\"user-meta\">\n          <strong>{{ userName }}</strong>\n          <small>{{ userRole }}</small>\n        </div>\n      </div>\n\n      <el-menu\n        :default-active=\"activeRoute\"\n        class=\"sidebar-menu\"\n        background-color=\"transparent\"\n        text-color=\"#6b7280\"\n        active-text-color=\"#2563eb\"\n      >\n        <el-menu-item\n          v-for=\"item in visibleMenus\"\n          :key=\"item.name\"\n          :index=\"item.name\"\n          @click=\"() => navigate(item)\"\n        >\n          <el-icon v-if=\"item.icon\"><component :is=\"item.icon\" /></el-icon>\n          <span>{{ item.label }}</span>\n        </el-menu-item>\n      </el-menu>\n\n      <div class=\"sidebar-actions\" v-if=\"isExpanded\">\n        <el-button type=\"primary\" plain block size=\"small\" @click=\"goProfile\">\n          个人中心\n        </el-button>\n        <el-button type=\"danger\" plain block size=\"small\" @click=\"logout\">\n          退出登录\n        </el-button>\n      </div>\n    </div>\n  </aside>\n</template>\n\n<script setup>\nimport { computed, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Grid, Histogram, User, Menu as MenuIcon } from '@element-plus/icons-vue';\nimport { sanitizeInput } from '../../utils/security';\n\nconst router = useRouter();\nconst route = useRoute();\nconst store = useStore();\nconst hover = ref(false);\nconst isExpanded = computed(() => hover.value);\n\nfunction setHover(value) {\n  hover.value = value;\n}\n\nconst navMenus = [\n  {\n    name: 'Dashboard',\n    label: '仪表盘总览',\n    icon: Histogram,\n    roles: ['admin', 'operator', 'merchant']\n  },\n  {\n    name: 'Profile',\n    label: '个人中心',\n    icon: User\n  },\n  {\n    name: 'Navigation',\n    label: '系统导航',\n    icon: MenuIcon\n  }\n];\n\nconst profileState = computed(() => store.getters['user/userProfile'] || {});\nconst userState = computed(() => store.getters['auth/currentUser'] || {});\nconst userRoles = computed(() => userState.value.roles || []);\n\nconst userName = computed(\n  () =>\n    sanitizeInput(\n      profileState.value.username ||\n        userState.value.username ||\n        '未设置'\n    )\n);\nconst userRole = computed(() => userRoles.value[0] || '普通用户');\nconst userInitials = computed(() =>\n  userName.value ? userName.value.slice(0, 1).toUpperCase() : 'U'\n);\n\nconst visibleMenus = computed(() =>\n  navMenus.filter((item) => {\n    if (!item.roles?.length) return true;\n    return item.roles.some((role) => userRoles.value.includes(role));\n  })\n);\n\nconst activeRoute = computed(() => route.name);\n\nfunction navigate(item) {\n  router.push({ name: item.name }).catch(() => {});\n}\n\nfunction goProfile() {\n  router.push({ name: 'Profile' }).catch(() => {});\n}\n\nasync function logout() {\n  await store.dispatch('auth/logout');\n  await store.dispatch('user/clearProfile');\n  router.replace({ name: 'Login' });\n}\n</script>\n\n<style scoped>\n.app-sidebar {\n  position: fixed;\n  top: 70px;\n  left: 0;\n  height: calc(100vh - 70px);\n  width: 12px;\n  z-index: 900;\n  pointer-events: auto;\n}\n\n.app-sidebar::before {\n  content: '';\n  width: 12px;\n  background: linear-gradient(180deg, rgba(79, 70, 229, 0.9), rgba(59, 130, 246, 0.95));\n  border-radius: 0 6px 6px 0;\n  box-shadow: 4px 0 14px rgba(59, 130, 246, 0.35);\n  cursor: pointer;\n}\n\n.sidebar-content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: calc(100vh - 70px);\n  width: 240px;\n  background: rgba(15, 23, 42, 0.94);\n  backdrop-filter: blur(10px);\n  border-right: 1px solid rgba(255, 255, 255, 0.08);\n  padding: 18px 14px;\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n  transform: translateX(-105%);\n  transition: transform 0.3s ease;\n  box-shadow: 12px 0 30px rgba(15, 23, 42, 0.45);\n  pointer-events: auto;\n}\n\n.app-sidebar.is-expanded .sidebar-content {\n  transform: translateX(0);\n}\n\n.sidebar-brand {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-weight: 600;\n  color: #fff;\n  padding: 0 8px;\n}\n\n.sidebar-user {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 8px 4px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n.user-avatar {\n  width: 42px;\n  height: 42px;\n  border-radius: 50%;\n  background: rgba(59, 130, 246, 0.35);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  font-size: 18px;\n}\n\n.user-meta {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  color: #fff;\n}\n\n.user-meta small {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.sidebar-menu {\n  border-right: none;\n}\n\n.sidebar-menu :deep(.el-menu-item) {\n  border-radius: 10px;\n  margin-bottom: 8px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.sidebar-menu :deep(.el-menu-item.is-active) {\n  background: rgba(255, 255, 255, 0.18);\n  font-weight: 600;\n  color: #fff;\n}\n\n.sidebar-actions {\n  margin-top: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.app-sidebar::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  border-radius: 0 20px 20px 0;\n  box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.05);\n}\n\n@media (max-width: 1024px) {\n  .app-sidebar {\n    display: none;\n  }\n}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}