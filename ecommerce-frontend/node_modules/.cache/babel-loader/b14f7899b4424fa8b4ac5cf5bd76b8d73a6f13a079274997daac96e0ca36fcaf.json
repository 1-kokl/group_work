{"ast":null,"code":"import { onErrorCaptured, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'ErrorBoundary',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const hasError = ref(false);\n    const router = useRouter();\n    function handleReload() {\n      window.location.reload();\n    }\n    function handleReset() {\n      hasError.value = false;\n      router.back();\n    }\n    onErrorCaptured((error, instance, info) => {\n      console.error('[ErrorBoundary] 捕获到错误:', {\n        error,\n        instance,\n        info\n      });\n      hasError.value = true;\n      return false;\n    });\n    const __returned__ = {\n      hasError,\n      router,\n      handleReload,\n      handleReset,\n      onErrorCaptured,\n      ref,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onErrorCaptured","ref","useRouter","hasError","router","handleReload","window","location","reload","handleReset","value","back","error","instance","info","console"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/components/common/ErrorBoundary.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <slot v-if=\"!hasError\" />\r\n    <div v-else class=\"error-fallback\">\r\n      <el-result\r\n        icon=\"warning\"\r\n        title=\"页面出现错误\"\r\n        sub-title=\"我们已记录该问题，请稍后重试或刷新页面。\"\r\n      >\r\n        <template #extra>\r\n          <el-button type=\"primary\" @click=\"handleReload\">刷新页面</el-button>\r\n          <el-button @click=\"handleReset\">返回上一页</el-button>\r\n        </template>\r\n      </el-result>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onErrorCaptured, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst hasError = ref(false);\r\nconst router = useRouter();\r\n\r\nfunction handleReload() {\r\n  window.location.reload();\r\n}\r\n\r\nfunction handleReset() {\r\n  hasError.value = false;\r\n  router.back();\r\n}\r\n\r\nonErrorCaptured((error, instance, info) => {\r\n  console.error('[ErrorBoundary] 捕获到错误:', { error, instance, info });\r\n  hasError.value = true;\r\n  return false;\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.error-fallback {\r\n  min-height: 320px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 24px;\r\n}\r\n</style>\r\n\r\n"],"mappings":"AAmBA,SAASA,eAAe,EAAEC,GAAG,QAAQ,KAAK;AAC1C,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,QAAQ,GAAGF,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMG,MAAM,GAAGF,SAAS,CAAC,CAAC;IAE1B,SAASG,YAAYA,CAAA,EAAG;MACtBC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC1B;IAEA,SAASC,WAAWA,CAAA,EAAG;MACrBN,QAAQ,CAACO,KAAK,GAAG,KAAK;MACtBN,MAAM,CAACO,IAAI,CAAC,CAAC;IACf;IAEAX,eAAe,CAAC,CAACY,KAAK,EAAEC,QAAQ,EAAEC,IAAI,KAAK;MACzCC,OAAO,CAACH,KAAK,CAAC,wBAAwB,EAAE;QAAEA,KAAK;QAAEC,QAAQ;QAAEC;MAAK,CAAC,CAAC;MAClEX,QAAQ,CAACO,KAAK,GAAG,IAAI;MACrB,OAAO,KAAK;IACd,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}