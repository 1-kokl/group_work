{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport { computed, onMounted, reactive, ref, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { User, Message, Lock, Iphone } from '@element-plus/icons-vue';\nimport http from '../../services/http';\nimport { sanitizeInput, validatePasswordStrength, validatePhoneNumber, validateUsername } from '../../utils/security';\nimport { debounceAsync } from '../../utils/perf';\nexport default {\n  __name: 'Register',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const formRef = ref();\n    const loading = ref(false);\n    const errorMessage = ref('');\n    const captchaImage = ref('');\n    const usernameChecking = ref(false);\n    const form = reactive({\n      username: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      phone: '',\n      captcha: '',\n      agree: false\n    });\n    const router = useRouter();\n    const store = useStore();\n    const passwordStrength = computed(() => validatePasswordStrength(form.password));\n    const strengthLevel = computed(() => {\n      if (passwordStrength.value.score >= 4) return 'strong';\n      if (passwordStrength.value.score >= 3) return 'medium';\n      return 'weak';\n    });\n    const passwordStrengthText = computed(() => {\n      if (!form.password) return '密码强度：--';\n      return `密码强度：${strengthLevelLabel[strengthLevel.value]}`;\n    });\n    const strengthLevelLabel = {\n      strong: '强',\n      medium: '中',\n      weak: '弱'\n    };\n\n    // 当前后端未实现 `/api/v1/user/check-username` 接口，这里暂时跳过远程校验，\n    // 只做前端格式校验，避免注册时出现“网络错误”。\n    const checkUsernameAvailability = debounceAsync(async username => {\n      void username;\n      return true;\n    }, 400);\n    const rules = {\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        validator: async (_, value, callback) => {\n          const sanitized = sanitizeInput(value);\n          if (sanitized !== value) {\n            form.username = sanitized;\n          }\n          const result = validateUsername(sanitized);\n          if (result !== true) {\n            callback(new Error(result));\n            return;\n          }\n          if (!sanitized) {\n            callback();\n            return;\n          }\n          usernameChecking.value = true;\n          try {\n            const available = await checkUsernameAvailability(sanitized);\n            if (!available) {\n              callback(new Error('用户名已被占用，请更换一个。'));\n            } else {\n              callback();\n            }\n          } catch (error) {\n            if (error?.message === 'REQUEST_DEBOUNCED') {\n              return;\n            }\n            console.warn('检查用户名失败', error);\n            callback(new Error('无法验证用户名，请稍后再试。'));\n          } finally {\n            usernameChecking.value = false;\n          }\n        },\n        trigger: 'blur'\n      }],\n      email: [{\n        required: true,\n        message: '请输入邮箱',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '请输入正确的邮箱格式',\n        trigger: ['blur', 'change']\n      }],\n      password: [{\n        required: true,\n        message: '请输入密码',\n        trigger: 'blur'\n      }, {\n        validator: (_, value, callback) => {\n          const result = validatePasswordStrength(value);\n          if (!result.valid) {\n            callback(new Error(result.feedback[0] || '密码规则不符合要求'));\n          } else {\n            callback();\n          }\n        },\n        trigger: 'change'\n      }],\n      confirmPassword: [{\n        required: true,\n        message: '请再次输入密码',\n        trigger: 'blur'\n      }, {\n        validator: (_, value, callback) => {\n          if (value !== form.password) {\n            callback(new Error('两次输入的密码不一致'));\n          } else {\n            callback();\n          }\n        },\n        trigger: ['blur', 'change']\n      }],\n      phone: [{\n        required: true,\n        message: '请输入手机号',\n        trigger: 'blur'\n      }, {\n        validator: (_, value, callback) => {\n          const sanitized = sanitizeInput(value);\n          if (sanitized !== value) {\n            form.phone = sanitized;\n          }\n          const result = validatePhoneNumber(sanitized);\n          if (result !== true) {\n            callback(new Error(result));\n          } else {\n            callback();\n          }\n        },\n        trigger: ['blur', 'change']\n      }],\n      captcha: [{\n        required: true,\n        message: '请输入验证码',\n        trigger: 'blur'\n      }, {\n        len: 6,\n        message: '验证码为 6 位',\n        trigger: 'blur'\n      }],\n      agree: [{\n        validator: (_, value, callback) => {\n          if (!value) {\n            callback(new Error('请先阅读并同意相关协议'));\n          } else {\n            callback();\n          }\n        },\n        trigger: 'change'\n      }]\n    };\n    watch(() => form.password, () => {\n      if (formRef.value) {\n        formRef.value.validateField('confirmPassword').catch(() => {});\n      }\n    });\n    async function refreshCaptcha() {\n      try {\n        const {\n          image,\n          key\n        } = await http.get('/api/v1/public/captcha');\n        captchaImage.value = image;\n        sessionStorage.setItem('register.captchaKey', key);\n      } catch (error) {\n        captchaImage.value = '';\n        console.warn('获取注册验证码失败', error);\n      }\n    }\n    function goLogin() {\n      router.push({\n        name: 'Login'\n      });\n    }\n    function encryptPhone(phone) {\n      try {\n        return window.btoa(phone);\n      } catch (error) {\n        console.warn('手机号加密失败，退回明文传输', error);\n        return phone;\n      }\n    }\n    async function handleSubmit() {\n      if (!formRef.value || usernameChecking.value) return;\n      errorMessage.value = '';\n      formRef.value.validate(async valid => {\n        if (!valid) return;\n        loading.value = true;\n        try {\n          await store.dispatch('auth/register', {\n            username: sanitizeInput(form.username),\n            email: sanitizeInput(form.email),\n            password: form.password,\n            phone: encryptPhone(sanitizeInput(form.phone)),\n            captcha: form.captcha,\n            captchaKey: sessionStorage.getItem('register.captchaKey')\n          });\n          ElMessage.success('注册成功，已自动登录');\n          router.replace({\n            name: 'Dashboard'\n          });\n        } catch (error) {\n          errorMessage.value = error?.message || '注册失败，请稍后再试。';\n          refreshCaptcha();\n        } finally {\n          loading.value = false;\n        }\n      });\n    }\n    onMounted(() => {\n      refreshCaptcha();\n    });\n    const __returned__ = {\n      formRef,\n      loading,\n      errorMessage,\n      captchaImage,\n      usernameChecking,\n      form,\n      router,\n      store,\n      passwordStrength,\n      strengthLevel,\n      passwordStrengthText,\n      strengthLevelLabel,\n      checkUsernameAvailability,\n      rules,\n      refreshCaptcha,\n      goLogin,\n      encryptPhone,\n      handleSubmit,\n      computed,\n      onMounted,\n      reactive,\n      ref,\n      watch,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get User() {\n        return User;\n      },\n      get Message() {\n        return Message;\n      },\n      get Lock() {\n        return Lock;\n      },\n      get Iphone() {\n        return Iphone;\n      },\n      get http() {\n        return http;\n      },\n      get sanitizeInput() {\n        return sanitizeInput;\n      },\n      get validatePasswordStrength() {\n        return validatePasswordStrength;\n      },\n      get validatePhoneNumber() {\n        return validatePhoneNumber;\n      },\n      get validateUsername() {\n        return validateUsername;\n      },\n      get debounceAsync() {\n        return debounceAsync;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","onMounted","reactive","ref","watch","useRouter","useStore","ElMessage","User","Message","Lock","Iphone","http","sanitizeInput","validatePasswordStrength","validatePhoneNumber","validateUsername","debounceAsync","formRef","loading","errorMessage","captchaImage","usernameChecking","form","username","email","password","confirmPassword","phone","captcha","agree","router","store","passwordStrength","strengthLevel","value","score","passwordStrengthText","strengthLevelLabel","strong","medium","weak","checkUsernameAvailability","rules","required","message","trigger","validator","_","callback","sanitized","result","Error","available","error","console","warn","type","valid","feedback","len","validateField","catch","refreshCaptcha","image","key","get","sessionStorage","setItem","goLogin","push","name","encryptPhone","window","btoa","handleSubmit","validate","dispatch","captchaKey","getItem","success","replace"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/pages/auth/Register.vue"],"sourcesContent":["<template>\n  <div class=\"auth-container\">\n    <div class=\"auth-card\">\n      <header class=\"auth-header\">\n        <h1>创建账户</h1>\n        <p>注册成为电商平台的新用户</p>\n      </header>\n\n      <el-form\n        ref=\"formRef\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-position=\"top\"\n        status-icon\n        class=\"auth-form\"\n        @keyup.enter=\"handleSubmit\"\n      >\n        <el-form-item prop=\"username\" label=\"用户名\">\n          <el-input\n            v-model.trim=\"form.username\"\n            placeholder=\"请输入用户名\"\n            clearable\n            :disabled=\"loading\"\n          >\n            <template #prepend>\n              <el-icon><User /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"email\" label=\"邮箱\">\n          <el-input\n            v-model.trim=\"form.email\"\n            placeholder=\"请输入邮箱地址\"\n            clearable\n            autocomplete=\"email\"\n            :disabled=\"loading\"\n          >\n            <template #prepend>\n              <el-icon><Message /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"password\" label=\"密码\">\n          <el-input\n            v-model=\"form.password\"\n            placeholder=\"请输入密码\"\n            show-password\n            autocomplete=\"new-password\"\n            :disabled=\"loading\"\n          >\n            <template #prepend>\n              <el-icon><Lock /></el-icon>\n            </template>\n          </el-input>\n          <div class=\"password-strength\">\n            <div class=\"strength-bar\">\n              <div\n                v-for=\"(segment, index) in 5\"\n                :key=\"index\"\n                :class=\"[\n                  'strength-segment',\n                  index < passwordStrength.score ? strengthLevel : 'inactive'\n                ]\"\n              />\n            </div>\n            <span class=\"strength-text\">{{ passwordStrengthText }}</span>\n          </div>\n        </el-form-item>\n\n        <el-form-item prop=\"confirmPassword\" label=\"确认密码\">\n          <el-input\n            v-model=\"form.confirmPassword\"\n            placeholder=\"请再次输入密码\"\n            show-password\n            autocomplete=\"new-password\"\n            :disabled=\"loading\"\n          />\n        </el-form-item>\n\n        <el-form-item prop=\"phone\" label=\"手机号\">\n          <el-input\n            v-model.trim=\"form.phone\"\n            placeholder=\"请输入 11 位手机号\"\n            maxlength=\"11\"\n            :disabled=\"loading\"\n          >\n            <template #prepend>\n              <el-icon><Iphone /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n\n        <el-form-item prop=\"captcha\" label=\"图形验证码\">\n          <el-row :gutter=\"12\">\n            <el-col :xs=\"24\" :sm=\"14\">\n              <el-input\n                v-model.trim=\"form.captcha\"\n                placeholder=\"请输入验证码\"\n                maxlength=\"6\"\n                :disabled=\"loading\"\n              />\n            </el-col>\n            <el-col :xs=\"24\" :sm=\"10\" class=\"captcha-col\">\n              <el-image\n                class=\"captcha-image\"\n                :src=\"captchaImage\"\n                fit=\"contain\"\n                @click=\"refreshCaptcha\"\n              >\n                <template #error>\n                  <div class=\"captcha-placeholder\" @click=\"refreshCaptcha\">\n                    点击刷新\n                  </div>\n                </template>\n              </el-image>\n            </el-col>\n          </el-row>\n        </el-form-item>\n\n        <el-form-item prop=\"agree\">\n          <el-checkbox v-model=\"form.agree\" :disabled=\"loading\">\n            我已阅读并同意\n            <el-link type=\"primary\" :underline=\"false\">《用户协议》</el-link>\n            和\n            <el-link type=\"primary\" :underline=\"false\">《隐私政策》</el-link>\n          </el-checkbox>\n        </el-form-item>\n\n        <el-alert\n          v-if=\"errorMessage\"\n          class=\"auth-alert\"\n          type=\"error\"\n          show-icon\n          :closable=\"false\"\n          :title=\"errorMessage\"\n        />\n\n        <el-button\n          type=\"primary\"\n          class=\"auth-submit\"\n          :loading=\"loading\"\n          :disabled=\"loading\"\n          @click=\"handleSubmit\"\n        >\n          注册并登录\n        </el-button>\n\n        <div class=\"form-footer\">\n          已有账号？\n          <el-link type=\"primary\" :underline=\"false\" @click=\"goLogin\">\n            返回登录\n          </el-link>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, onMounted, reactive, ref, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { ElMessage } from 'element-plus';\nimport { User, Message, Lock, Iphone } from '@element-plus/icons-vue';\n\nimport http from '../../services/http';\nimport {\n  sanitizeInput,\n  validatePasswordStrength,\n  validatePhoneNumber,\n  validateUsername\n} from '../../utils/security';\nimport { debounceAsync } from '../../utils/perf';\n\nconst formRef = ref();\nconst loading = ref(false);\nconst errorMessage = ref('');\nconst captchaImage = ref('');\nconst usernameChecking = ref(false);\n\nconst form = reactive({\n  username: '',\n  email: '',\n  password: '',\n  confirmPassword: '',\n  phone: '',\n  captcha: '',\n  agree: false\n});\n\nconst router = useRouter();\nconst store = useStore();\n\nconst passwordStrength = computed(() =>\n  validatePasswordStrength(form.password)\n);\n\nconst strengthLevel = computed(() => {\n  if (passwordStrength.value.score >= 4) return 'strong';\n  if (passwordStrength.value.score >= 3) return 'medium';\n  return 'weak';\n});\n\nconst passwordStrengthText = computed(() => {\n  if (!form.password) return '密码强度：--';\n  return `密码强度：${strengthLevelLabel[strengthLevel.value]}`;\n});\n\nconst strengthLevelLabel = {\n  strong: '强',\n  medium: '中',\n  weak: '弱'\n};\n\n// 当前后端未实现 `/api/v1/user/check-username` 接口，这里暂时跳过远程校验，\n// 只做前端格式校验，避免注册时出现“网络错误”。\nconst checkUsernameAvailability = debounceAsync(async (username) => {\n  void username;\n  return true;\n}, 400);\n\nconst rules = {\n  username: [\n    { required: true, message: '请输入用户名', trigger: 'blur' },\n    {\n      validator: async (_, value, callback) => {\n        const sanitized = sanitizeInput(value);\n        if (sanitized !== value) {\n          form.username = sanitized;\n        }\n\n        const result = validateUsername(sanitized);\n        if (result !== true) {\n          callback(new Error(result));\n          return;\n        }\n\n        if (!sanitized) {\n          callback();\n          return;\n        }\n\n        usernameChecking.value = true;\n        try {\n          const available = await checkUsernameAvailability(sanitized);\n          if (!available) {\n            callback(new Error('用户名已被占用，请更换一个。'));\n          } else {\n            callback();\n          }\n        } catch (error) {\n          if (error?.message === 'REQUEST_DEBOUNCED') {\n            return;\n          }\n          console.warn('检查用户名失败', error);\n          callback(new Error('无法验证用户名，请稍后再试。'));\n        } finally {\n          usernameChecking.value = false;\n        }\n      },\n      trigger: 'blur'\n    }\n  ],\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: ['blur', 'change'] }\n  ],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    {\n      validator: (_, value, callback) => {\n        const result = validatePasswordStrength(value);\n        if (!result.valid) {\n          callback(new Error(result.feedback[0] || '密码规则不符合要求'));\n        } else {\n          callback();\n        }\n      },\n      trigger: 'change'\n    }\n  ],\n  confirmPassword: [\n    { required: true, message: '请再次输入密码', trigger: 'blur' },\n    {\n      validator: (_, value, callback) => {\n        if (value !== form.password) {\n          callback(new Error('两次输入的密码不一致'));\n        } else {\n          callback();\n        }\n      },\n      trigger: ['blur', 'change']\n    }\n  ],\n  phone: [\n    { required: true, message: '请输入手机号', trigger: 'blur' },\n    {\n      validator: (_, value, callback) => {\n        const sanitized = sanitizeInput(value);\n        if (sanitized !== value) {\n          form.phone = sanitized;\n        }\n        const result = validatePhoneNumber(sanitized);\n        if (result !== true) {\n          callback(new Error(result));\n        } else {\n          callback();\n        }\n      },\n      trigger: ['blur', 'change']\n    }\n  ],\n  captcha: [\n    { required: true, message: '请输入验证码', trigger: 'blur' },\n    { len: 6, message: '验证码为 6 位', trigger: 'blur' }\n  ],\n  agree: [\n    {\n      validator: (_, value, callback) => {\n        if (!value) {\n          callback(new Error('请先阅读并同意相关协议'));\n        } else {\n          callback();\n        }\n      },\n      trigger: 'change'\n    }\n  ]\n};\n\nwatch(\n  () => form.password,\n  () => {\n    if (formRef.value) {\n      formRef.value.validateField('confirmPassword').catch(() => {});\n    }\n  }\n);\n\nasync function refreshCaptcha() {\n  try {\n    const { image, key } = await http.get('/api/v1/public/captcha');\n    captchaImage.value = image;\n    sessionStorage.setItem('register.captchaKey', key);\n  } catch (error) {\n    captchaImage.value = '';\n    console.warn('获取注册验证码失败', error);\n  }\n}\n\nfunction goLogin() {\n  router.push({ name: 'Login' });\n}\n\nfunction encryptPhone(phone) {\n  try {\n    return window.btoa(phone);\n  } catch (error) {\n    console.warn('手机号加密失败，退回明文传输', error);\n    return phone;\n  }\n}\n\nasync function handleSubmit() {\n  if (!formRef.value || usernameChecking.value) return;\n\n  errorMessage.value = '';\n\n  formRef.value.validate(async (valid) => {\n    if (!valid) return;\n\n    loading.value = true;\n    try {\n      await store.dispatch('auth/register', {\n        username: sanitizeInput(form.username),\n        email: sanitizeInput(form.email),\n        password: form.password,\n        phone: encryptPhone(sanitizeInput(form.phone)),\n        captcha: form.captcha,\n        captchaKey: sessionStorage.getItem('register.captchaKey')\n      });\n\n      ElMessage.success('注册成功，已自动登录');\n      router.replace({ name: 'Dashboard' });\n    } catch (error) {\n      errorMessage.value =\n        error?.message || '注册失败，请稍后再试。';\n      refreshCaptcha();\n    } finally {\n      loading.value = false;\n    }\n  });\n}\n\nonMounted(() => {\n  refreshCaptcha();\n});\n</script>\n\n<style scoped>\n.auth-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #ecfdf5 0%, #ffffff 100%);\n  padding: 24px;\n}\n\n.auth-card {\n  width: 100%;\n  max-width: 520px;\n  background: #fff;\n  border-radius: 16px;\n  padding: 32px 40px;\n  box-shadow: 0 20px 48px -24px rgba(16, 185, 129, 0.45);\n}\n\n.auth-header {\n  text-align: center;\n  margin-bottom: 24px;\n}\n\n.auth-header h1 {\n  margin: 0;\n  font-size: 26px;\n  color: #064e3b;\n}\n\n.auth-header p {\n  margin: 8px 0 0;\n  color: #047857;\n  font-size: 14px;\n}\n\n.auth-form {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.password-strength {\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.strength-bar {\n  display: flex;\n  gap: 4px;\n  flex: 1;\n}\n\n.strength-segment {\n  flex: 1;\n  height: 6px;\n  border-radius: 3px;\n  background-color: #e5e7eb;\n  transition: background-color 0.3s ease;\n}\n\n.strength-segment.weak {\n  background-color: #f87171;\n}\n\n.strength-segment.medium {\n  background-color: #facc15;\n}\n\n.strength-segment.strong {\n  background-color: #34d399;\n}\n\n.strength-segment.inactive {\n  background-color: #e5e7eb;\n}\n\n.strength-text {\n  font-size: 12px;\n  color: #6b7280;\n  white-space: nowrap;\n}\n\n.auth-alert {\n  margin: 12px 0;\n}\n\n.auth-submit {\n  width: 100%;\n  height: 44px;\n  font-size: 16px;\n  margin: 12px 0 8px;\n}\n\n.form-footer {\n  text-align: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.captcha-col {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.captcha-image {\n  width: 100%;\n  height: 46px;\n  border-radius: 8px;\n  cursor: pointer;\n  border: 1px solid #e5e7eb;\n}\n\n.captcha-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  color: #6b7280;\n  background-color: #f3f4f6;\n  border-radius: 8px;\n}\n\n@media (max-width: 640px) {\n  .auth-card {\n    padding: 24px;\n  }\n}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}