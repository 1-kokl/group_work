{"ast":null,"code":"/**\r\n * 创建一个异步防抖函数\r\n * @param {Function} fn 原始异步函数\r\n * @param {number} delay 防抖延迟（毫秒）\r\n * @returns {Function} 防抖后的异步函数\r\n */\nexport function debounceAsync(fn, delay = 300) {\n  let timer = null;\n  let pendingReject = null;\n  return (...args) => new Promise((resolve, reject) => {\n    if (timer) {\n      clearTimeout(timer);\n      if (pendingReject) pendingReject(new Error('REQUEST_DEBOUNCED'));\n    }\n    pendingReject = reject;\n    timer = setTimeout(async () => {\n      timer = null;\n      pendingReject = null;\n      try {\n        const result = await fn(...args);\n        resolve(result);\n      } catch (error) {\n        reject(error);\n      }\n    }, delay);\n  });\n}\n\n/**\r\n * 简易的节流函数\r\n * @param {Function} fn 原始函数\r\n * @param {number} interval 节流间隔（毫秒）\r\n * @returns {Function}\r\n */\nexport function throttle(fn, interval = 300) {\n  let lastTime = 0;\n  return (...args) => {\n    const now = Date.now();\n    if (now - lastTime >= interval) {\n      lastTime = now;\n      fn(...args);\n    }\n  };\n}","map":{"version":3,"names":["debounceAsync","fn","delay","timer","pendingReject","args","Promise","resolve","reject","clearTimeout","Error","setTimeout","result","error","throttle","interval","lastTime","now","Date"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/utils/perf.js"],"sourcesContent":["/**\r\n * 创建一个异步防抖函数\r\n * @param {Function} fn 原始异步函数\r\n * @param {number} delay 防抖延迟（毫秒）\r\n * @returns {Function} 防抖后的异步函数\r\n */\r\nexport function debounceAsync(fn, delay = 300) {\r\n  let timer = null;\r\n  let pendingReject = null;\r\n\r\n  return (...args) =>\r\n    new Promise((resolve, reject) => {\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n        if (pendingReject) pendingReject(new Error('REQUEST_DEBOUNCED'));\r\n      }\r\n\r\n      pendingReject = reject;\r\n      timer = setTimeout(async () => {\r\n        timer = null;\r\n        pendingReject = null;\r\n        try {\r\n          const result = await fn(...args);\r\n          resolve(result);\r\n        } catch (error) {\r\n          reject(error);\r\n        }\r\n      }, delay);\r\n    });\r\n}\r\n\r\n/**\r\n * 简易的节流函数\r\n * @param {Function} fn 原始函数\r\n * @param {number} interval 节流间隔（毫秒）\r\n * @returns {Function}\r\n */\r\nexport function throttle(fn, interval = 300) {\r\n  let lastTime = 0;\r\n  return (...args) => {\r\n    const now = Date.now();\r\n    if (now - lastTime >= interval) {\r\n      lastTime = now;\r\n      fn(...args);\r\n    }\r\n  };\r\n}\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,aAAaA,CAACC,EAAE,EAAEC,KAAK,GAAG,GAAG,EAAE;EAC7C,IAAIC,KAAK,GAAG,IAAI;EAChB,IAAIC,aAAa,GAAG,IAAI;EAExB,OAAO,CAAC,GAAGC,IAAI,KACb,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IAC/B,IAAIL,KAAK,EAAE;MACTM,YAAY,CAACN,KAAK,CAAC;MACnB,IAAIC,aAAa,EAAEA,aAAa,CAAC,IAAIM,KAAK,CAAC,mBAAmB,CAAC,CAAC;IAClE;IAEAN,aAAa,GAAGI,MAAM;IACtBL,KAAK,GAAGQ,UAAU,CAAC,YAAY;MAC7BR,KAAK,GAAG,IAAI;MACZC,aAAa,GAAG,IAAI;MACpB,IAAI;QACF,MAAMQ,MAAM,GAAG,MAAMX,EAAE,CAAC,GAAGI,IAAI,CAAC;QAChCE,OAAO,CAACK,MAAM,CAAC;MACjB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdL,MAAM,CAACK,KAAK,CAAC;MACf;IACF,CAAC,EAAEX,KAAK,CAAC;EACX,CAAC,CAAC;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASY,QAAQA,CAACb,EAAE,EAAEc,QAAQ,GAAG,GAAG,EAAE;EAC3C,IAAIC,QAAQ,GAAG,CAAC;EAChB,OAAO,CAAC,GAAGX,IAAI,KAAK;IAClB,MAAMY,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IACtB,IAAIA,GAAG,GAAGD,QAAQ,IAAID,QAAQ,EAAE;MAC9BC,QAAQ,GAAGC,GAAG;MACdhB,EAAE,CAAC,GAAGI,IAAI,CAAC;IACb;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}