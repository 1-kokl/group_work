{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nconst STORAGE_PREFIX = 'cache:';\n\n/**\r\n * 将数据存入本地缓存\r\n * @param {string} key 缓存键\r\n * @param {any} value 缓存值\r\n * @param {number} ttl 过期时间（毫秒）\r\n */\nexport function setCache(key, value, ttl = 300000) {\n  try {\n    const payload = {\n      value,\n      expiredAt: ttl ? Date.now() + Number(ttl) : null\n    };\n    localStorage.setItem(`${STORAGE_PREFIX}${key}`, JSON.stringify(payload));\n  } catch (error) {\n    console.warn('[cache] 设置缓存失败:', error);\n  }\n}\n\n/**\r\n * 读取本地缓存\r\n * @param {string} key 缓存键\r\n * @returns {any|null}\r\n */\nexport function getCache(key) {\n  try {\n    const raw = localStorage.getItem(`${STORAGE_PREFIX}${key}`);\n    if (!raw) return null;\n    const payload = JSON.parse(raw);\n    if (payload.expiredAt && Date.now() > payload.expiredAt) {\n      localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\n      return null;\n    }\n    return payload.value;\n  } catch (error) {\n    console.warn('[cache] 读取缓存失败:', error);\n    localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\n    return null;\n  }\n}\n\n/**\r\n * 清除指定缓存\r\n * @param {string} key 缓存键\r\n */\nexport function clearCache(key) {\n  try {\n    localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\n  } catch (error) {\n    console.warn('[cache] 清理缓存失败:', error);\n  }\n}\n\n/**\r\n * 清空所有缓存\r\n */\nexport function clearAllCache() {\n  try {\n    Object.keys(localStorage).filter(key => key.startsWith(STORAGE_PREFIX)).forEach(key => localStorage.removeItem(key));\n  } catch (error) {\n    console.warn('[cache] 清空缓存失败:', error);\n  }\n}","map":{"version":3,"names":["STORAGE_PREFIX","setCache","key","value","ttl","payload","expiredAt","Date","now","Number","localStorage","setItem","JSON","stringify","error","console","warn","getCache","raw","getItem","parse","removeItem","clearCache","clearAllCache","Object","keys","filter","startsWith","forEach"],"sources":["C:/Users/Administrator/Desktop/zonshe/ecommerce-frontend/src/utils/cache.js"],"sourcesContent":["const STORAGE_PREFIX = 'cache:';\r\n\r\n/**\r\n * 将数据存入本地缓存\r\n * @param {string} key 缓存键\r\n * @param {any} value 缓存值\r\n * @param {number} ttl 过期时间（毫秒）\r\n */\r\nexport function setCache(key, value, ttl = 300000) {\r\n  try {\r\n    const payload = {\r\n      value,\r\n      expiredAt: ttl ? Date.now() + Number(ttl) : null\r\n    };\r\n    localStorage.setItem(`${STORAGE_PREFIX}${key}`, JSON.stringify(payload));\r\n  } catch (error) {\r\n    console.warn('[cache] 设置缓存失败:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * 读取本地缓存\r\n * @param {string} key 缓存键\r\n * @returns {any|null}\r\n */\r\nexport function getCache(key) {\r\n  try {\r\n    const raw = localStorage.getItem(`${STORAGE_PREFIX}${key}`);\r\n    if (!raw) return null;\r\n    const payload = JSON.parse(raw);\r\n    if (payload.expiredAt && Date.now() > payload.expiredAt) {\r\n      localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\r\n      return null;\r\n    }\r\n    return payload.value;\r\n  } catch (error) {\r\n    console.warn('[cache] 读取缓存失败:', error);\r\n    localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * 清除指定缓存\r\n * @param {string} key 缓存键\r\n */\r\nexport function clearCache(key) {\r\n  try {\r\n    localStorage.removeItem(`${STORAGE_PREFIX}${key}`);\r\n  } catch (error) {\r\n    console.warn('[cache] 清理缓存失败:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * 清空所有缓存\r\n */\r\nexport function clearAllCache() {\r\n  try {\r\n    Object.keys(localStorage)\r\n      .filter((key) => key.startsWith(STORAGE_PREFIX))\r\n      .forEach((key) => localStorage.removeItem(key));\r\n  } catch (error) {\r\n    console.warn('[cache] 清空缓存失败:', error);\r\n  }\r\n}\r\n\r\n"],"mappings":";;;AAAA,MAAMA,cAAc,GAAG,QAAQ;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,QAAQA,CAACC,GAAG,EAAEC,KAAK,EAAEC,GAAG,GAAG,MAAM,EAAE;EACjD,IAAI;IACF,MAAMC,OAAO,GAAG;MACdF,KAAK;MACLG,SAAS,EAAEF,GAAG,GAAGG,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGC,MAAM,CAACL,GAAG,CAAC,GAAG;IAC9C,CAAC;IACDM,YAAY,CAACC,OAAO,CAAC,GAAGX,cAAc,GAAGE,GAAG,EAAE,EAAEU,IAAI,CAACC,SAAS,CAACR,OAAO,CAAC,CAAC;EAC1E,CAAC,CAAC,OAAOS,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,iBAAiB,EAAEF,KAAK,CAAC;EACxC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,QAAQA,CAACf,GAAG,EAAE;EAC5B,IAAI;IACF,MAAMgB,GAAG,GAAGR,YAAY,CAACS,OAAO,CAAC,GAAGnB,cAAc,GAAGE,GAAG,EAAE,CAAC;IAC3D,IAAI,CAACgB,GAAG,EAAE,OAAO,IAAI;IACrB,MAAMb,OAAO,GAAGO,IAAI,CAACQ,KAAK,CAACF,GAAG,CAAC;IAC/B,IAAIb,OAAO,CAACC,SAAS,IAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGH,OAAO,CAACC,SAAS,EAAE;MACvDI,YAAY,CAACW,UAAU,CAAC,GAAGrB,cAAc,GAAGE,GAAG,EAAE,CAAC;MAClD,OAAO,IAAI;IACb;IACA,OAAOG,OAAO,CAACF,KAAK;EACtB,CAAC,CAAC,OAAOW,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,iBAAiB,EAAEF,KAAK,CAAC;IACtCJ,YAAY,CAACW,UAAU,CAAC,GAAGrB,cAAc,GAAGE,GAAG,EAAE,CAAC;IAClD,OAAO,IAAI;EACb;AACF;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASoB,UAAUA,CAACpB,GAAG,EAAE;EAC9B,IAAI;IACFQ,YAAY,CAACW,UAAU,CAAC,GAAGrB,cAAc,GAAGE,GAAG,EAAE,CAAC;EACpD,CAAC,CAAC,OAAOY,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,iBAAiB,EAAEF,KAAK,CAAC;EACxC;AACF;;AAEA;AACA;AACA;AACA,OAAO,SAASS,aAAaA,CAAA,EAAG;EAC9B,IAAI;IACFC,MAAM,CAACC,IAAI,CAACf,YAAY,CAAC,CACtBgB,MAAM,CAAExB,GAAG,IAAKA,GAAG,CAACyB,UAAU,CAAC3B,cAAc,CAAC,CAAC,CAC/C4B,OAAO,CAAE1B,GAAG,IAAKQ,YAAY,CAACW,UAAU,CAACnB,GAAG,CAAC,CAAC;EACnD,CAAC,CAAC,OAAOY,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,iBAAiB,EAAEF,KAAK,CAAC;EACxC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}